<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Filmes - Sistema de Cinema</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Estilos específicos para o formulário de cadastro */
        .form-container {
            background-color: #fff;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        select {
            background-color: #fff;
        }

        button {
            background-color: #1abc9c;
            color: #fff;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #16a085;
        }

        .alert {
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 20px;
            display: none;
        }

        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-danger {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .filmes-cadastrados {
            margin-top: 40px;
        }

        .filmes-cadastrados h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        table, th, td {
            border: 1px solid #ddd;
        }

        th, td {
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
            color: #2c3e50;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .btn-excluir {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
        }

        .btn-excluir:hover {
            background-color: #c0392b;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Sistema de Gerenciamento de Cinema</h1>
        </div>
    </header>

    <nav>
        <div class="container">
            <ul class="menu">
                <li><a href="cadastro-filmes.html" class="active">Cadastro de Filmes</a></li>
                <li><a href="cadastro-salas.html">Cadastro de Salas</a></li>
                <li><a href="cadastro-sessoes.html">Cadastro de Sessões</a></li>
                <li><a href="venda-ingressos.html">Venda de Ingressos</a></li>
                <li><a href="sessoes.html">Listagem de Sessões Disponíveis</a></li>
                <li><a href="index.html">Voltar à Página Inicial</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <div class="container">
            <h2>Cadastro de Filmes</h2>

            <div class="alert alert-success" id="mensagem-sucesso">
                Filme cadastrado com sucesso!
            </div>

            <div class="alert alert-danger" id="mensagem-erro">
                Por favor, preencha todos os campos obrigatórios.
            </div>

            <div class="form-container">
                <form id="form-filme">
                    <div class="form-group">
                        <label for="titulo">Título*</label>
                        <input type="text" id="titulo" name="titulo" required>
                    </div>

                    <div class="form-group">
                        <label for="descricao">Descrição*</label>
                        <textarea id="descricao" name="descricao" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="genero">Gênero*</label>
                        <select id="genero" name="genero" required>
                            <option value="">Selecione um gênero</option>
                            <option value="acao">Ação</option>
                            <option value="aventura">Aventura</option>
                            <option value="comedia">Comédia</option>
                            <option value="drama">Drama</option>
                            <option value="ficcao">Ficção Científica</option>
                            <option value="terror">Terror</option>
                            <option value="romance">Romance</option>
                            <option value="animacao">Animação</option>
                            <option value="documentario">Documentário</option>
                            <option value="fantasia">Fantasia</option>
                            <option value="musical">Musical</option>
                            <option value="suspense">Suspense</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="classificacao">Classificação Indicativa*</label>
                        <select id="classificacao" name="classificacao" required>
                            <option value="">Selecione uma classificação</option>
                            <option value="livre">Livre</option>
                            <option value="10">10 anos</option>
                            <option value="12">12 anos</option>
                            <option value="14">14 anos</option>
                            <option value="16">16 anos</option>
                            <option value="18">18 anos</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="duracao">Duração (minutos)*</label>
                        <input type="number" id="duracao" name="duracao" min="1" required>
                    </div>

                    <div class="form-group">
                        <label for="data_estreia">Data de Estreia*</label>
                        <input type="date" id="data_estreia" name="data_estreia" required>
                    </div>

                    <button type="submit">Salvar Filme</button>
                </form>
            </div>

            <div class="filmes-cadastrados">
                <h3>Filmes Cadastrados</h3>
                <table id="tabela-filmes">
                    <thead>
                        <tr>
                            <th>Título</th>
                            <th>Gênero</th>
                            <th>Classificação</th>
                            <th>Duração</th>
                            <th>Data de Estreia</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Os filmes cadastrados serão inseridos aqui dinamicamente via JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Sistema de Gerenciamento de Cinema</p>
        </div>
    </footer>

    <script>
        // Função para formatar a data no formato DD/MM/AAAA
        function formatarData(data) {
            const dataObj = new Date(data);
            const dia = String(dataObj.getDate()).padStart(2, '0');
            const mes = String(dataObj.getMonth() + 1).padStart(2, '0');
            const ano = dataObj.getFullYear();
            return `${dia}/${mes}/${ano}`;
        }

        // Função para obter o texto do gênero
        function obterTextoGenero(valor) {
            const generos = {
                'acao': 'Ação',
                'aventura': 'Aventura',
                'comedia': 'Comédia',
                'drama': 'Drama',
                'ficcao': 'Ficção Científica',
                'terror': 'Terror',
                'romance': 'Romance',
                'animacao': 'Animação',
                'documentario': 'Documentário',
                'fantasia': 'Fantasia',
                'musical': 'Musical',
                'suspense': 'Suspense'
            };
            return generos[valor] || valor;
        }

        // Função para obter o texto da classificação
        function obterTextoClassificacao(valor) {
            if (valor === 'livre') return 'Livre';
            return `${valor} anos`;
        }

        // Função para carregar filmes do localStorage
        function carregarFilmes() {
            const filmes = JSON.parse(localStorage.getItem('filmes')) || [];
            const tabela = document.getElementById('tabela-filmes').getElementsByTagName('tbody')[0];

            // Limpa a tabela
            tabela.innerHTML = '';

            // Adiciona os filmes na tabela
            filmes.forEach((filme, index) => {
                const row = tabela.insertRow();

                row.insertCell(0).textContent = filme.titulo;
                row.insertCell(1).textContent = obterTextoGenero(filme.genero);
                row.insertCell(2).textContent = obterTextoClassificacao(filme.classificacao);
                row.insertCell(3).textContent = `${filme.duracao} min`;
                row.insertCell(4).textContent = formatarData(filme.data_estreia);

                const cellAcoes = row.insertCell(5);
                const btnExcluir = document.createElement('button');
                btnExcluir.textContent = 'Excluir';
                btnExcluir.classList.add('btn-excluir');
                btnExcluir.onclick = function() {
                    excluirFilme(index);
                };
                cellAcoes.appendChild(btnExcluir);
            });
        }

        // Função para excluir um filme
        function excluirFilme(index) {
            if (confirm('Tem certeza que deseja excluir este filme?')) {
                const filmes = JSON.parse(localStorage.getItem('filmes')) || [];
                filmes.splice(index, 1);
                localStorage.setItem('filmes', JSON.stringify(filmes));
                carregarFilmes();
            }
        }

        // Função para salvar um novo filme
        function salvarFilme(filme) {
            const filmes = JSON.parse(localStorage.getItem('filmes')) || [];
            filmes.push(filme);
            localStorage.setItem('filmes', JSON.stringify(filmes));
            carregarFilmes();
        }

        // Evento de submissão do formulário
        document.getElementById('form-filme').addEventListener('submit', function(event) {
            event.preventDefault();

            const mensagemSucesso = document.getElementById('mensagem-sucesso');
            const mensagemErro = document.getElementById('mensagem-erro');

            // Oculta as mensagens
            mensagemSucesso.style.display = 'none';
            mensagemErro.style.display = 'none';

            // Obtém os valores do formulário
            const titulo = document.getElementById('titulo').value.trim();
            const descricao = document.getElementById('descricao').value.trim();
            const genero = document.getElementById('genero').value;
            const classificacao = document.getElementById('classificacao').value;
            const duracao = document.getElementById('duracao').value;
            const data_estreia = document.getElementById('data_estreia').value;

            // Verifica se todos os campos obrigatórios foram preenchidos
            if (!titulo || !descricao || !genero || !classificacao || !duracao || !data_estreia) {
                mensagemErro.style.display = 'block';
                return;
            }

            // Cria o objeto filme
            const filme = {
                titulo,
                descricao,
                genero,
                classificacao,
                duracao,
                data_estreia
            };

            // Salva o filme
            salvarFilme(filme);

            // Exibe mensagem de sucesso
            mensagemSucesso.style.display = 'block';

            // Limpa o formulário
            this.reset();

            // Oculta a mensagem de sucesso após 3 segundos
            setTimeout(() => {
                mensagemSucesso.style.display = 'none';
            }, 3000);
        });

        // Carrega os filmes ao iniciar a página
        document.addEventListener('DOMContentLoaded', carregarFilmes);
    </script>
</body>
</html>
